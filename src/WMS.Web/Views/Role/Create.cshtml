@model WMS.Application.DTOs.RoleDto
@{
    ViewData["Title"] = "新增角色";
}

<div class="page-container">
    <div class="page-header-section">
        <div class="page-title-wrapper">
            <h2 class="page-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px; vertical-align: middle;">
                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
                </svg>
                新增角色
            </h2>
            <p class="page-subtitle">创建新的系统角色并配置权限</p>
        </div>
    </div>

    <div class="card-modern">
        <div class="card-body-modern">
            @if (ViewBag.Error != null)
            {
                <div class="alert-modern alert-danger-modern" role="alert">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 8px;">
                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
                    </svg>
                    @ViewBag.Error
                </div>
            }

            <form asp-action="Create" method="post" class="form-modern">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group-modern">
                            <label asp-for="Name" class="form-label-modern">
                                角色名称 <span class="text-danger">*</span>
                            </label>
                            <input asp-for="Name" class="form-control-modern" required placeholder="请输入角色名称" />
                        </div>

                        <div class="form-group-modern">
                            <label asp-for="Code" class="form-label-modern">
                                角色编码 <span class="text-danger">*</span>
                            </label>
                            <input asp-for="Code" class="form-control-modern" required placeholder="请输入角色编码（英文）" />
                            <small class="form-text-modern">角色编码用于系统内部识别，建议使用英文大写字母</small>
                        </div>

                        <div class="form-group-modern">
                            <label asp-for="Description" class="form-label-modern">描述</label>
                            <textarea asp-for="Description" class="form-control-modern" rows="3" placeholder="请输入角色描述"></textarea>
                        </div>

                        <div class="form-group-modern">
                            <div class="form-check-modern">
                                <input asp-for="IsEnabled" class="form-check-input-modern" type="checkbox" checked id="isEnabled" />
                                <label asp-for="IsEnabled" class="form-check-label-modern" for="isEnabled">
                                    启用角色
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group-modern">
                            <label class="form-label-modern">权限设置</label>
                            <div id="permissionTree" class="permission-tree-container">
                                <div class="loading-text">加载权限树...</div>
                            </div>
                            <small class="form-text-modern">选择该角色可以访问的菜单和按钮权限</small>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-save">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 4px;">
                            <path d="M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 1-1-1H7a1 1 0 0 1 1-1H2zm0 1v12h12V2H2z"/>
                            <path d="M9.5 4a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5zM9 5h2v2H9z"/>
                        </svg>
                        保存
                    </button>
                    <a href="@Url.Action("Index", "Role")" class="btn-cancel">返回</a>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/role-permission.js"></script>
}

